<!DOCTYPE html>
<html lang="jp">

<head>

  <meta charset="utf-8">
  <title>Vue Testing</title>
  <meta name="keywords" content="vue vuejs testing" />
  <meta name="description" content="Vue.js のテスト" />

  <link rel="icon" href="assets/favicon.ico" type="image/vnd.microsoft.icon">

  <script src="https://unpkg.com/vue@next"></script>

  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css"
    integrity="sha384-Uu6IeWbM+gzNVXJcM9XV3SohHtmWE+3VGi496jvgX1jyvDTXfdK+rfZc8C1Aehk5"
    crossorigin="anonymous">

  <link href="assets/style.css" rel="stylesheet" type="text/css">

</head>

<body>

  <header>
    <a href="#">
      <h1>Vue Testing</h1>
    </a>
    <a href="https://github.com/moyomogi/vue-testing/actions/workflows/cd.yml">
      <img src="https://github.com/moyomogi/vue-testing/actions/workflows/cd.yml/badge.svg">
    </a>
    <a href="https://github.com/moyomogi/vue-testing">
      <img src="https://img.shields.io/github/last-commit/moyomogi/vue-testing">
    </a>
  </header>
  <br>

  <div id="right">

    <!-- CONTENTS -->
    <h2>CONTENTS</h2>
    <div class="right-link pure-menu custom-restricted-width">
      <ul class="pure-menu-list">
        <li class="pure-menu-item pure-menu-selected">
          <a href="#advertisement" class="pure-menu-link">advertisement</a>
        </li>
        <li class="pure-menu-item">
          <a href="#counter" class="pure-menu-link">counter</a>
        </li>
        <li class="pure-menu-item">
          <a href="#two-way-binding" class="pure-menu-link">two-way-binding</a>
        </li>
        <li class="pure-menu-item">
          <a href="#prime-factorize" class="pure-menu-link">prime-factorize</a>
        </li>
        <li class="pure-menu-item">
          <a href="#calc-gcd-and-lcm" class="pure-menu-link">calc-gcd-and-lcm</a>
        </li>
      </ul>
    </div>

  </div>

  <div class="content">

    <!-- advertisement -->
    <div id="advertisement">
      <h2>advertisement</h2>
      <label class="pure-checkbox">
        <input type="checkbox" id="ad-checkbox" v-model="visible" />
      </label>
      <label for="ad-checkbox"> visible</label>
      <div v-if="visible">
        <input type="radio" id="ad-option-one" value="one" v-model="adOption" />
        <label for="ad-option-one" class="pure-radio">【ブルアカ】2nd PV</label><br>
        <input type="radio" id="ad-option-two" value="two" v-model="adOption" />
        <label for="ad-option-two" class="pure-radio">【ブルアカ】「夏空のウィッシュリスト」イベントPV</label><br>
        <input type="radio" id="ad-option-three" value="three" v-model="adOption" />
        <label for="ad-option-three" class="pure-radio">【ブルアカ】アロナちゃんねる #18</label><br>
        <br>
        <div v-if="adOption=='one'">
          <iframe width="480" height="270" src="https://www.youtube.com/embed/cE1ePjq5ZSs"
            title="YouTube video player" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen></iframe>
        </div>
        <div v-else-if="adOption=='two'">
          <iframe width="480" height="270" src="https://www.youtube.com/embed/TcHq_NQsmIA"
            title="YouTube video player" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen></iframe>
        </div>
        <div v-else>
          <iframe width="480" height="270" src="https://www.youtube.com/embed/7k1sRGMxKkI"
            title="YouTube video player" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen></iframe>
        </div>
        <br>
        <a href="https://apps.apple.com/jp/primeFactorizeApp/%E3%83%96%E3%83%AB%E3%83%BC%E3%82%A2%E3%83%BC%E3%82%AB%E3%82%A4%E3%83%96/id1515877221">
          <img src="assets/ios-play.png" />
        </a>
        <a href="https://play.google.com/store/apps/details?id=com.YostarJP.BlueArchive">
          <img src="assets/google-play.png" />
        </a>
      </div>
    </div>
    <br>

    <!-- counter -->
    <div id="counter">
      <h2>counter</h2>
      <div class="demo">{{ cnt }}s</div>
      <button class="pure-button pure-button-primary" @click="toggleCounter">
        {{ active ? 'Stop' : 'Start' }}
      </button>
    </div>
    <br><br>

    <!-- two-way-binding -->
    <div id="two-way-binding">
      <h2>{{ msg }}</h2>
      <form class="pure-form">
        <fieldset>
          <input v-model="msg" />
        </fieldset>
      </form>
    </div>
    <br>

    <!-- prime-factorize -->
    <div id="prime-factorize">
      <h2>prime-factorize</h2>
      <p v-if="tooLargeNumber">Error: Too large number!</p>
      <form class="pure-form">
        <fieldset>
          <input v-model.number="x" />
        </fieldset>
      </form>
      <div class="demo">
        num: {{ mFactors.length }}
        <ul>
          <todo-item v-for="factor in factors" :m-factor="factor" :key="factor"></todo-item>
        </ul>
      </div>
    </div>

    <!-- calc-gcd-and-lcm -->
    <div id="calc-gcd-and-lcm">
      <h2>calc-gcd-and-lcm</h2>
      <form class="pure-form pure-form-stacked">
        <fieldset>
          <label>a:</label>
          <input v-model.number="a" />
          <label>b:</label>
          <input v-model.number="b" />
        </fieldset>
      </form>
      <table class="pure-table">
        <thead>
          <tr>
            <th>gcd(a, b)</th>
            <th>lcm(a, b)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ gcd }}</td>
            <td>{{ lcm }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <br>

  </div>

  <script language="javascript" type="text/javascript">

    // advertisement
    const RadioApp = Vue.createApp({
      data() {
        return {
          visible: false,
          adOption: 'one'
        }
      },
    })
    RadioApp.mount('#advertisement')

    // counter
    Vue.createApp({
      data() {
        return {
          cnt: 0, active: true
        }
      },
      mounted() {
        setInterval(() => { this.cnt += this.active }, 1000)
      },
      methods: {
        toggleCounter() {
          this.active = !this.active
        }
      }
    }).mount('#counter')

    // two-way-binding
    Vue.createApp({
      data() {
        return {
          msg: 'two-way-binding'
        }
      }
    }).mount('#two-way-binding')

    // prime-factorize
    const primeFactorizeApp = Vue.createApp({
      data() {
        return {
          x: 7007, tooLargeNumber: false, mFactors: []
        }
      },
      computed: {
        factors() {
          this.mFactors.splice(0)
          this.tooLargeNumber = this.x > 100000000000000
          if (!this.x || this.tooLargeNumber) return []
          let mX = this.x
          if (this.x < 0) {
            this.mFactors.push(-1)
            mX *= -1
          } else if (mX == 1) {
            this.mFactors.push(1)
          }
          for (let i = 2; i * i < mX; i++) {
            if (mX % i == 0) {
              do {
                mX /= i
                this.mFactors.push(i)
              } while (mX % i == 0)
            }
          }
          if (mX != 1) {
            this.mFactors.push(mX)
          }
          return this.mFactors
        }
      }
    })
    primeFactorizeApp.component('todo-item', {
      props: ['mFactor'],
      template: `<li>{{ mFactor }}</li>`
    })
    primeFactorizeApp.mount('#prime-factorize')

    // calc-gcd-and-lcm
    const myGcd = (a, b) => b ? myGcd(b, a % b) : a
    Vue.createApp({
      data() {
        return {
          a: 6, b: 337
        }
      },
      computed: {
        gcd() {
          return myGcd(this.a, this.b)
        },
        lcm() {
          const g = myGcd(this.a, this.b)
          return g == 0 ? 0 : this.a * this.b / g
        }
      }
    }).mount('#calc-gcd-and-lcm')

  </script>

</body>

</html>
